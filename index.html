<!doctype html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebGPU Studio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="app-header">
    <div class="logo">
      WebGPU Studio
      <span class="pill subtle" data-i18n="header.by">by Pascal BALLET</span>
    </div>
    <div class="header-actions">
      <span class="pill subtle" data-i18n="header.tagline">Apprendre et enseigner WebGPU facilement</span>
      <span class="pill primary" id="versionPill" data-i18n="header.version" data-version="2.0">Version 2.0</span>
      <select id="languageSelect" class="lang-select" aria-label="Language">
        <option value="fr">üá´üá∑ FR</option>
        <option value="en">üá¨üáß EN</option>
      </select>
      <button class="ghost small" id="accountToggleBtn" data-i18n="header.account">Mon compte</button>
      <button class="ghost small" id="examplesBtn" data-i18n="toolbar.examples">Exemples</button>
      <div class="examples-menu hidden" id="examplesMenu" aria-label="Examples"></div>
      <button class="ghost small" id="themeToggleBtn" aria-label="Changer de th√®me"></button>
    </div>
  </header>


  <!-- Account Panel -->
  <div class="account-panel hidden" id="accountPanel">
    <div class="account-card">

      <!-- NOT Connected -->
      <div class="account-status" id="accountStatus" data-i18n="account.status.disconnected">Non connecte</div>
      <div class="account-forms" id="accountForms">
        <form id="authForm" class="form account-form">
          <label><span data-i18n="account.email">Email</span>
            <input type="email" id="authEmail" required />
          </label>
          <label><span data-i18n="account.password">Mot de passe</span>
            <input type="password" id="authPassword" required />
          </label>
          <div class="account-actions-row">
            <button class="ghost" id="loginBtn" type="button" data-i18n="account.login">Se connecter</button>
            <button class="solid" id="signupBtn" type="button" data-i18n="account.signup">Creer un compte</button>
          </div>
        </form>
        <div class="account-oauth">
          <button class="solid google-signin" id="googleSignInBtn" type="button">
            <span class="google-signin-icon" aria-hidden="true">
              <svg viewBox="0 0 48 48" width="18" height="18" focusable="false" aria-hidden="true">
                <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.2 3.62l6.86-6.86C35.86 2.45 30.35 0 24 0 14.64 0 6.6 5.38 2.69 13.22l7.98 6.19C12.58 13.48 17.86 9.5 24 9.5z"/>
                <path fill="#4285F4" d="M46.14 24.55c0-1.62-.15-3.18-.43-4.7H24v8.9h12.4c-.53 2.86-2.12 5.28-4.51 6.9l7.32 5.66c4.28-3.95 6.93-9.77 6.93-16.76z"/>
                <path fill="#FBBC05" d="M10.67 28.59A14.5 14.5 0 0 1 9.9 24c0-1.6.27-3.16.77-4.59l-7.98-6.19A23.98 23.98 0 0 0 0 24c0 3.88.93 7.55 2.69 10.78l7.98-6.19z"/>
                <path fill="#34A853" d="M24 48c6.35 0 11.67-2.1 15.56-5.69l-7.32-5.66c-2.03 1.36-4.63 2.17-8.24 2.17-6.14 0-11.42-3.98-13.33-9.59l-7.98 6.19C6.6 42.62 14.64 48 24 48z"/>
              </svg>
            </span>
            <span data-i18n="account.google">Se connecter avec Google</span>
          </button>
        </div>
      </div>

      <!-- CONNECTED -->
      <div class="account-actions hidden" id="accountActions">
        <div class="account-header">
          <div>
            <h2 class="panel-title" data-i18n="account.info_title">Mes informations</h2>
          </div>
        </div>
        <div class="checkbox">
            <input type="checkbox" id="newsletterOptIn" />
            <span data-i18n="account.newsletter">Recevoir la lettre d'information de WebGPU Studio</span>
        </div>
        <div class="account-status"><i data-i18n="account.newsletter_hint">(email exclusivement pour la newsletter)</i></div>
        <br>
        <button class="ghost" id="logoutBtn" data-i18n="account.logout">Se deconnecter</button>
        <button class="ghost danger" id="deleteAccountBtn" data-i18n="account.delete">Supprimer mon compte</button>
      </div>
      <p class="account-note" id="accountError"></p>
    </div>
  </div>
  <!-- END Account Panel -->

  <div class="modal hidden" id="helpModal" aria-labelledby="helpTitle" role="dialog" aria-modal="true">
    <div class="modal-content help-modal">
      <div class="modal-header">
        <h2 class="panel-title" id="helpTitle" data-i18n="help.title">Aide</h2>
        <div class="modal-header-actions">
          <button class="ghost small" id="helpResetZoomBtn" type="button" data-i18n="help.reset_zoom">100%</button>
          <button class="ghost small" id="helpCloseBtn" type="button" data-i18n="help.close">Fermer</button>
        </div>
      </div>
      <div class="help-body">
        <div class="help-stage">
          <button class="ghost small help-nav" id="helpPrevBtn" type="button" aria-label="Previous">‚Üê</button>
          <div class="help-image-wrap" id="helpImageWrap">
            <img class="help-image" id="helpMainImage" alt="" />
          </div>
          <button class="ghost small help-nav" id="helpNextBtn" type="button" aria-label="Next">‚Üí</button>
        </div>
        <div class="help-thumbs" id="helpThumbs" aria-label="Help images"></div>
      </div>
    </div>
  </div>


  <div class="app-shell">
    <aside class="system-panel hidden" id="systemInfoModal" aria-labelledby="systemInfoTitle">
      <div class="system-panel-resize" id="systemInfoResize" aria-hidden="true"></div>
      <div class="modal-content system-modal">
      <div class="modal-header">
        <h2 class="panel-title" id="systemInfoTitle" data-i18n="system.title">Infos syst√®me</h2>
        
      </div>

      <div class="system-grid">
        <div class="system-card">
          <p class="eyebrow" data-i18n="system.sections.performance">Performance</p>
          <div class="system-row">
            <div class="system-kv">
              <span data-i18n="system.labels.fps">FPS</span>
              <span id="sysFpsValue">‚Äî</span>
            </div>
            <div class="system-bar"><div class="system-bar-fill" id="sysFpsBar"></div></div>
          </div>
          <canvas id="sysFpsChart" width="360" height="90"></canvas>

          <div class="system-row">
            <div class="system-kv">
              <span data-i18n="system.labels.frame_time">Frame time</span>
              <span id="sysFrameTimeValue">‚Äî</span>
            </div>
            <div class="system-bar"><div class="system-bar-fill" id="sysFrameBar"></div></div>
          </div>

          <div class="system-row">
            <div class="system-kv">
              <span data-i18n="system.labels.js_heap">JS Heap</span>
              <span id="sysHeapValue">‚Äî</span>
            </div>
            <div class="system-bar"><div class="system-bar-fill" id="sysHeapBar"></div></div>
          </div>
        </div>

        <div class="system-card">
          <p class="eyebrow" data-i18n="system.sections.gpu">GPU</p>
          <div class="system-kv"><span data-i18n="system.labels.webgpu">WebGPU</span><span id="sysWebGpu">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.webgpu_adapter">Adapter</span><span id="sysWebGpuAdapter">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.webgpu_features">Features</span><span id="sysWebGpuFeatures">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.gpu_name">GPU</span><span id="sysGpuName">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.gpu_driver">Driver</span><span id="sysGpuDriver">‚Äî</span></div>
          <div class="system-row">
            <div class="system-kv">
              <span data-i18n="system.labels.gpu_util">GPU util</span>
              <span id="sysGpuUtil">‚Äî</span>
            </div>
            <div class="system-bar"><div class="system-bar-fill" id="sysGpuUtilBar"></div></div>
          </div>
          <canvas id="sysGpuUtilChart" width="360" height="90"></canvas>

          <div class="system-row">
            <div class="system-kv">
              <span data-i18n="system.labels.vram_usage">VRAM</span>
              <span id="sysVramUsage">‚Äî</span>
            </div>
            <div class="system-bar"><div class="system-bar-fill" id="sysVramBar"></div></div>
          </div>
          <canvas id="sysVramChart" width="360" height="90"></canvas>
          <div class="system-kv"><span data-i18n="system.labels.gpus_detected">GPUs d√©tect√©s</span><span id="sysGpuDetectedCount">‚Äî</span></div>
          <div class="system-box" id="sysGpuDetectedList"></div>
          <div class="system-kv"><span data-i18n="system.labels.webgl">WebGL</span><span id="sysWebGl">‚Äî</span></div>
        </div>

        <div class="system-card">
          <p class="eyebrow" data-i18n="system.sections.hardware">Mat√©riel</p>
          <div class="system-kv"><span data-i18n="system.labels.agent">Agent</span><span id="sysAgentStatus">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.os">OS</span><span id="sysOs">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.cpu_model">CPU model</span><span id="sysCpuModel">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.cpu_usage">CPU usage</span><span id="sysCpuUsage">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.loadavg">Load avg</span><span id="sysLoadAvg">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.ram_usage">RAM used</span><span id="sysRamUsage">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.cpu">CPU</span><span id="sysCpu">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.ram">RAM</span><span id="sysRam">‚Äî</span></div>
        </div>

        <div class="system-card">
          <p class="eyebrow" data-i18n="system.sections.browser">Navigateur</p>
          <div class="system-kv"><span data-i18n="system.labels.browser">Browser</span><span id="sysBrowser">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.platform">Platform</span><span id="sysPlatform">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.language">Language</span><span id="sysLanguage">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.screen">Screen</span><span id="sysScreen">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.storage">Storage</span><span id="sysStorage">‚Äî</span></div>
        </div>

        <div class="system-card">
          <p class="eyebrow" data-i18n="system.sections.app">Application</p>
          <div class="system-kv"><span data-i18n="system.labels.textures">Textures</span><span id="sysTexCount">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.est_vram">Est. GPU memory</span><span id="sysTexBytes">‚Äî</span></div>
          <div class="system-kv"><span data-i18n="system.labels.webgpu_limits">WebGPU Limits</span><span id="sysWebGpuLimitsCount">‚Äî</span></div>
          <div class="system-box" id="sysWebGpuLimits">‚Äî</div>
        </div>
      </div>
      </div>
    </aside>


    <main class="app">
    <div class="toolbar">
      <button class="ghost" id="newProjectBtn" data-i18n="toolbar.new">Nouveau</button>
      <button class="ghost" id="loadBtn" data-i18n="toolbar.load">Charger</button>
      <button class="ghost" id="saveBtn" data-i18n="toolbar.save">Sauver</button>
      <span class="toolbar-separator" aria-hidden="true"></span>
      <button class="solid" id="compileBtn" data-i18n="toolbar.compile">Compile</button>
      <button class="ghost" id="stepBtn" data-i18n="toolbar.step">Step</button>
      <button class="ghost" id="runBtn" data-i18n="toolbar.run">Run</button>
      <button class="ghost" id="pauseBtn" data-i18n="toolbar.pause">Pause</button>
      <button class="ghost danger" id="stopBtn" data-i18n="toolbar.stop">Stop</button>
      <span class="pill subtle" id="stepLabel">step = 0</span>
      <div class="pill subtle" id="runSpeedPill">
        <span data-i18n="preview.speed">Vitesse</span>
        <input type="range" min="1" max="240" value="60" id="runSpeedSlider" />
        <span id="runSpeedLabel">60/s</span>
      </div>
      <input type="file" id="loadFileInput" accept=".wgstudio" style="display:none" />
      <span class="toolbar-separator" aria-hidden="true"></span>
      <span class="pill subtle" id="previewValueLabel" data-i18n="toolbar.values_empty">Valeurs : ‚Äî</span>
      <div class="toolbar-right">
        <button class="ghost" id="helpBtn" data-i18n="toolbar.help">Aide</button>
        <button class="ghost" id="tutosBtn" data-i18n="toolbar.tuto">Tuto</button>
        <button class="ghost" id="systemInfoBtn" data-i18n="header.system_info">System</button>
        <div class="examples-menu hidden" id="tutosMenu" aria-label="Tutorials"></div>
      </div>
    </div>

    <nav class="tabs">
      <button class="tab active" data-tab="buffers" data-i18n="tabs.buffers">Buffers</button>
      <button class="tab" data-tab="functions" data-i18n="tabs.functions">Fonctions</button>
      <button class="tab" data-tab="shaders" data-i18n="tabs.shaders">Compute Shaders</button>
      <button class="tab" data-tab="pass" data-i18n="tabs.pass">Pass</button>
      <button class="tab" data-tab="parameters" data-i18n="tabs.parameters">Param√®tres</button>
      <button class="tab" data-tab="console"><span data-i18n="tabs.console">Console</span> <span class="tab-badge hidden" id="consoleErrorBadge">!</span></button>
    </nav>

    <section class="tab-content active" id="tab-buffers">
      <div class="panel panel-list">
        <div class="panel-header">
          <div>
            <h2 class="panel-title" data-i18n="panels.buffers_title">Buffers</h2>
          </div>
          <div class="header-actions">
            <button class="ghost" id="addBufferBtn" data-i18n="buttons.add">+ Ajouter</button>
            <button class="ghost small" id="moveTextureUpBtn">‚Üë</button>
            <button class="ghost small" id="moveTextureDownBtn">‚Üì</button>
          </div>
        </div>
        <div class="list" id="bufferList"></div>
      </div>

      <div class="panel panel-preview" id="previewPanel">
        <div class="panel-header">
          <div>
            <h2 class="panel-title" data-i18n="panels.preview_title">Visualisation 2D/3D</h2>
          </div>
          <div class="pill subtle">
            <input type="range" min="0" value="0" id="zSlice" />
            <span id="sliceLabel">Z = 0</span>
          </div>
          <div class="toggle-group">
            <button class="toggle" data-mode="2d">2D</button>
            <button class="toggle active" data-mode="3d">3D</button>
            <button class="toggle" id="previewValuesToggle" data-i18n="preview.values">Val</button>
          </div>
          <button class="ghost small" id="previewFullscreenBtn" data-i18n="preview.fullscreen">Plein √©cran</button>
        </div>
        <div class="preview-fullscreen-controls hidden" id="previewFullscreenControls">
          <button class="ghost" id="fsCompileBtn" data-i18n="toolbar.compile">Compile</button>
          <button class="ghost" id="fsStepBtn" data-i18n="toolbar.step">Step</button>
          <button class="ghost" id="fsRunBtn" data-i18n="toolbar.run">Run</button>
          <button class="ghost" id="fsPauseBtn" data-i18n="toolbar.pause">Pause</button>
          <button class="ghost danger" id="fsStopBtn" data-i18n="toolbar.stop">Stop</button>
          <span class="pill subtle" id="fsStepLabel">step = 0</span>
          <div class="pill subtle" id="fsRunSpeedPill">
            <span data-i18n="preview.speed">Vitesse</span>
            <input type="range" min="1" max="240" value="60" id="fsRunSpeedSlider" />
            <span id="fsRunSpeedLabel">60/s</span>
          </div>
          <div class="toggle-group" id="fsToggleGroup">
            <button class="toggle" data-mode="2d">2D</button>
            <button class="toggle active" data-mode="3d">3D</button>
          </div>
          <div class="pill subtle" id="fsZSlicePill">
            <input type="range" min="0" value="0" id="fsZSlice" />
            <span id="fsSliceLabel">Z = 0</span>
          </div>
          <button class="ghost small" id="fsExitFullscreenBtn" data-i18n="preview.exit">Quitter</button>
        </div>
        <div class="preview-area">
          <div id="preview2D" class="preview-grid"></div>
          <div id="preview3D" class="preview-stack hidden"></div>
        </div>
        <div class="values-panel hidden" id="bufferValuesPanel">
          <div class="values-header">
            <p class="eyebrow" data-i18n="preview.values_title">Valeurs</p>
            <div class="values-header-actions">
              <div class="values-meta" id="bufferValuesMeta"></div>
              <button class="ghost small" id="bufferValuesCopyBtn" data-i18n="preview.copy_tsv">Copier TSV</button>
            </div>
          </div>
          <div class="values-grid" id="bufferValuesGrid">
            <div class="values-spacer" id="bufferValuesSpacer"></div>
            <div class="values-viewport" id="bufferValuesViewport"></div>
            <div class="values-empty hidden" id="bufferValuesEmpty" data-i18n="preview.values_empty">Aucun buffer s√É¬©lectionn√É¬©</div>
          </div>
        </div>
      </div>

      <div class="panel panel-properties">
        <div class="panel-header">
          <div>
            <p class="eyebrow" data-i18n="common.properties">Propri√©t√©s</p>
            <h2 class="panel-title" data-i18n="panels.selected_buffer">Buffer s√©lectionn√©</h2>
          </div>
          <button class="ghost danger" id="removeTextureBtn" data-i18n="buttons.delete">Supprimer</button>
        </div>

        <form id="textureForm" class="form">
          <label><span data-i18n="form.name">Nom</span>
            <input type="text" name="name" required />
          </label>

          <div class="grid-3">
            <label><span data-i18n="form.size_x">Taille X</span>
              <input type="text" name="sizeX" value="32" required />
            </label>
            <label><span data-i18n="form.size_y">Taille Y</span>
              <input type="text" name="sizeY" value="32" required />
            </label>
            <label><span data-i18n="form.size_z">Taille Z</span>
              <input type="text" name="sizeZ" value="1" required />
            </label>
          </div>

          <label><span data-i18n="form.type">Type</span>
            <select name="type">
              <option value="int" data-i18n="options.type_int">Entier (i32)</option>
              <option value="uint" data-i18n="options.type_uint">Entier non sign√© (u32)</option>
              <option value="float" data-i18n="options.type_float">Flottant (f32)</option>
            </select>
          </label>

          <label><span data-i18n="form.initial_values">Valeurs initiales</span>
            <select name="fill">
              <option value="empty" data-i18n="options.fill_empty">Matrice vide (z√©ro)</option>
              <option value="random" data-i18n="options.fill_random">Remplissage al√©atoire</option>
            </select>
          </label>

          <div class="grid-2">
            <button type="submit" class="solid" data-i18n="buttons.apply">Appliquer</button>
            <button type="button" class="ghost" id="regenValuesBtn" data-i18n="buttons.regen_values">R√©g√©n√©rer valeurs</button>
          </div>
        </form>
      </div>
    </section>

    <section class="tab-content" id="tab-shaders">
      <div class="panel panel-list">
        <div class="panel-header">
          <div>
            <h2 class="panel-title" data-i18n="panels.compute_shaders">Compute Shaders</h2>
          </div>
          <div class="header-actions">
            <button class="ghost" id="addShaderBtn" data-i18n="buttons.add">+ Ajouter</button>
            <button class="ghost small" id="moveShaderUpBtn">‚Üë</button>
            <button class="ghost small" id="moveShaderDownBtn">‚Üì</button>
          </div>
        </div>
        <div class="list" id="shaderList"></div>
      </div>

      <div class="panel panel-preview">
        <div class="panel-header">
          <div>
            <p class="eyebrow" data-i18n="shaders.wgsl_label">Web GPU Shader Language</p>
            <h2 class="panel-title">WGSL</h2>
          </div>
          <span class="pill subtle" id="shaderLines">0 lignes</span>
        </div>
        <p class="eyebrow" data-i18n="shaders.bindings_label">WGSL bindings</p>
        <textarea id="shaderBindingsEditor" class="small-code-editor" spellcheck="false" readonly></textarea>
        <div class="code-editor-shell">
          <div class="code-lines" id="shaderGutter"></div>
          <div class="code-editor-layer">
            <pre class="code-highlight wgsl-highlight" id="shaderHighlight" aria-hidden="true"></pre>
            <textarea id="shaderEditor" class="code-editor code-editor-input" spellcheck="false" wrap="off"></textarea>
          </div>
        </div>
        <div class="editor-diagnostics hidden" id="shaderDiagnostics"></div>
      </div>

      <div class="panel panel-properties">
        <div class="panel-header">
          <div>
            <p class="eyebrow" data-i18n="common.properties">Propri√©t√©s</p>
            <h2 class="panel-title" data-i18n="panels.compute_shaders">Compute Shaders</h2>
          </div>
          <button class="ghost danger" id="removeShaderBtn" data-i18n="buttons.delete">Supprimer</button>
        </div>

        <form id="shaderForm" class="form">
          <label><span data-i18n="form.name">Nom</span>
            <input type="text" name="shaderName" required />
          </label>

          <div class="grid-2">
            <button type="submit" class="solid" data-i18n="buttons.apply">Appliquer</button>
            <button type="button" class="ghost" id="duplicateShaderBtn" data-i18n="buttons.duplicate">Dupliquer</button>
          </div>
        </form>

        <div class="divider"></div>
        <p class="eyebrow">Buffers</p>
        <div class="buffer-select-note" data-i18n="shaders.buffers_limit_note">Choisis jusqu‚Äô√† 8 buffers pour ce shader.</div>
        <div class="buffer-select-list" id="shaderBufferList"></div>
      </div>
    </section>

    <section class="tab-content" id="tab-pass">
      <div class="panel panel-list">
        <div class="panel-header">
          <div>
            <h2 class="panel-title" data-i18n="panels.compute_shaders">Compute Shaders</h2>
          </div>
          <button class="ghost" id="addPipelineBtn" data-i18n="buttons.add_pipeline">+ Pipeline >>></button>
        </div>
        <div class="list" id="pipelineList"></div>
      </div>

      <div class="panel panel-preview">
        <div class="panel-header">
          <div>
            <p class="eyebrow" data-i18n="pipeline.execution_order">Ordre d'ex√©cution des</p>
            <h2 class="panel-title" data-i18n="pipeline.pipelines">Pipelines</h2>
          </div>
          <div class="header-actions">
            <button class="ghost small" id="moveUpBtn" data-i18n="pipeline.before">Avant ‚Üê</button>
            <button class="ghost small" id="moveDownBtn" data-i18n="pipeline.after">‚Üí Apr√®s</button>
            <button class="ghost small" id="addLoopStartBtn" data-i18n="pipeline.loop_start">+ D√©but boucle</button>
            <button class="ghost small" id="addLoopEndBtn" data-i18n="pipeline.loop_end">+ Fin boucle</button>
          </div>
        </div>
        <div class="timeline" id="pipelineTimeline"></div>
      </div>

        <div class="panel panel-properties">
          <div class="panel-header">
            <div>
              <p class="eyebrow" data-i18n="common.properties">Propri√©t√©s</p>
              <h2 class="panel-title" id="pipelinePanelTitle">Pipeline s√©lectionn√©e</h2>
            </div>
            <button class="ghost danger" id="removePipelineBtn" data-i18n="buttons.delete">Supprimer</button>
          </div>

        <form id="pipelineForm" class="form">
          <label><span data-i18n="pipeline.name">Nom du pipe-line</span>
            <input type="text" name="pipeName" required />
          </label>

          <label class="field-shader"><span data-i18n="pipeline.shader">Compute Shader associ√©</span>
            <select name="shaderRef" id="pipelineShaderSelect"></select>
          </label>

          <label class="field-activated"><span data-i18n="pipeline.activated">Activ√©e</span>
            <input type="checkbox" name="pipeActivated" checked />
          </label>

          <div id="loopStartFields" class="field-repeat hidden">
            <label><span data-i18n="pipeline.repetitions">R√©p√©titions</span>
              <input type="number" name="loopRepeat" min="1" value="2" />
            </label>
            <p class="meta" data-i18n="pipeline.repetitions_hint">Les pipelines jusqu‚Äô√† la fin de boucle seront r√©p√©t√©s.</p>
          </div>

          <div id="dispatchFields">
            <label data-i18n="pipeline.dispatch">dispatch Workgroups</label>
            <div class="grid-3">
              <label>x
                <input type="text" name="pDispatchX" value="8" required />
              </label>
              <label>y
                <input type="text" name="pDispatchY" value="4" required />
              </label>
              <label>z
                <input type="text" name="pDispatchZ" value="1" required />
              </label>
            </div>
          </div>

          <div id="loopEndFields" class="hidden">
            <p class="meta" data-i18n="pipeline.loop_end_hint">Fin de boucle : aucune propri√©t√© √† configurer.</p>
          </div>

          <button type="submit" class="solid" data-i18n="buttons.apply">Appliquer</button>
        </form>
      </div>
    </section>

    <section class="tab-content" id="tab-parameters">
      <div class="panel panel-list">
        <div class="panel-header">
          <div>
            <h2 class="panel-title" data-i18n="parameters.title">Param√®tres</h2>
          </div>
          <div class="header-actions">
            <button class="ghost" id="addParameterBtn" data-i18n="buttons.add">+ Ajouter</button>
            <button class="ghost small" id="moveParameterUpBtn">‚Üë</button>
            <button class="ghost small" id="moveParameterDownBtn">‚Üì</button>
          </div>
        </div>
        <div class="list" id="parameterList"></div>
      </div>

      <div class="panel panel-preview">
        <div class="panel-header">
          <div>
            <p class="eyebrow" data-i18n="parameters.preview_label">R√©sultats</p>
            <h2 class="panel-title" data-i18n="parameters.preview_title">Valeurs calcul√©es</h2>
          </div>
        </div>
        <div class="parameters-grid" id="parameterPreviewGrid"></div>
        <div class="parameters-empty hidden" id="parameterPreviewEmpty" data-i18n="parameters.empty_preview">Ajoutez des param√®tres, par exemple SX = 128 puis DispatchMatrix = SX/8.</div>
      </div>

      <div class="panel panel-properties">
        <div class="panel-header">
          <div>
            <p class="eyebrow" data-i18n="common.properties">Propri√©t√©s</p>
            <h2 class="panel-title" data-i18n="parameters.selected">Param√®tre s√©lectionn√©</h2>
          </div>
          <button class="ghost danger" id="removeParameterBtn" data-i18n="buttons.delete">Supprimer</button>
        </div>

        <form id="parameterForm" class="form">
          <label><span data-i18n="form.name">Nom</span>
            <input type="text" name="parameterName" required />
          </label>

          <label><span data-i18n="parameters.expression">Expression</span>
            <input type="text" name="parameterExpr" placeholder="SX/8" />
          </label>

          <div class="parameter-result">
            <span class="eyebrow" data-i18n="parameters.result">R√©sultat</span>
            <div class="parameter-value" id="parameterValue">‚Äî</div>
          </div>

          <p class="parameter-note" id="parameterNote"></p>

          <button type="submit" class="solid" data-i18n="buttons.apply">Appliquer</button>
        </form>
      </div>
    </section>

    <section class="tab-content" id="tab-functions">
      <div class="panel panel-list">
        <div class="panel-header">
          <div>
            <h2 class="panel-title" data-i18n="functions.libraries">Biblio-th√®ques</h2>
          </div>
          <div class="header-actions">
            <button class="ghost" id="addFunctionBtn" data-i18n="buttons.add">+ Ajouter</button>
            <button class="ghost small" id="moveFunctionUpBtn">‚Üë</button>
            <button class="ghost small" id="moveFunctionDownBtn">‚Üì</button>
          </div>
        </div>
        <div class="list" id="functionList"></div>
      </div>

      <div class="panel panel-preview">
        <div class="panel-header">
          <div>
            <p class="eyebrow" data-i18n="functions.code_label">Code</p>
            <h2 class="panel-title">WGSL</h2>
          </div>
          <span class="pill subtle" id="functionLines">0 lignes</span>
        </div>
        <p class="eyebrow" data-i18n="functions.declarations">D√©claration des <b>Buffers</b> et des <b>uniform</b></p>
        <textarea id="texturesEditor" class="small-code-editor" spellcheck="false" readonly>@group(0) @binding(0) var&lt;storage, read_write&gt; texture1 : array&lt;i32&gt;;
@group(0) @binding(1) var&lt;uniform&gt; step : u32;
@group(0) @binding(2) var&lt;uniform&gt; mouseX : u32;
@group(0) @binding(3) var&lt;uniform&gt; mouseY : u32;
@group(0) @binding(4) var&lt;uniform&gt; mouseZ : u32;
@group(0) @binding(5) var&lt;uniform&gt; mouseBtn : u32;
@group(0) @binding(6) var&lt;uniform&gt; key : u32;</textarea>
        <p class="eyebrow" data-i18n="functions.selected">Biblioth√®que s√©lectionn√©e</p>
        <div class="code-editor-shell">
          <div class="code-lines" id="functionGutter"></div>
          <div class="code-editor-layer">
            <pre class="code-highlight wgsl-highlight" id="functionHighlight" aria-hidden="true"></pre>
            <textarea id="functionEditor" class="code-editor code-editor-input" spellcheck="false" wrap="off"></textarea>
          </div>
        </div>
        <div class="editor-diagnostics hidden" id="functionDiagnostics"></div>
      </div>

      <div class="panel panel-properties">
        <div class="panel-header">
          <div>
            <p class="eyebrow" data-i18n="common.properties">Propri√©t√©s</p>
            <h2 class="panel-title" data-i18n="functions.selected_function">Fonction s√©lectionn√©e</h2>
          </div>
          <button class="ghost danger" id="removeFunctionBtn" data-i18n="buttons.delete">Supprimer</button>
        </div>

        <form id="functionForm" class="form">
          <label><span data-i18n="form.name">Nom</span>
            <input type="text" name="functionName" required />
          </label>
          <div class="grid-2">
            <button type="submit" class="solid" data-i18n="buttons.apply">Appliquer</button>
            <button type="button" class="ghost" id="duplicateFunctionBtn" data-i18n="buttons.duplicate">Dupliquer</button>
          </div>
        </form>

        <div class="stats-grid" id="functionStats">
          <div class="stat-card">
            <p class="eyebrow" data-i18n="stats.lines">Lignes</p>
            <div class="stat-value" id="statLines">0</div>
          </div>
          <div class="stat-card">
            <p class="eyebrow" data-i18n="stats.chars">Caract√®res</p>
            <div class="stat-value" id="statChars">0</div>
          </div>
        </div>
      </div>
    </section>

    <section class="tab-content" id="tab-console">
      <div class="panel panel-preview" style="grid-column: span 3;">
        <div class="panel-header">
          <div>
            <p class="eyebrow" data-i18n="console.title">Console</p>
            <h2 class="panel-title" data-i18n="console.compile_errors">Erreurs de compilation</h2>
          </div>
          <button class="ghost" id="clearConsoleBtn" data-i18n="console.clear">Effacer</button>
        </div>
        <div class="console-area" id="consoleArea"></div>
      </div>
    </section>
    </main>
  </div>

  <script src="https://unpkg.com/i18next@23.10.1/i18next.min.js"></script>
  <script src="https://unpkg.com/i18next-http-backend@2.5.0/i18nextHttpBackend.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore-compat.js"></script>
  <script src="app.js"></script>
</body>
</html>
